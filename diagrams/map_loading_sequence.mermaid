sequenceDiagram
    participant ML as MapLoader
    participant M as Map
    participant C as Continent
    participant T as Territory
    participant F as File

    Note over ML,F: Map Loading Sequence

    ML->>F: Open map file
    F-->>ML: File stream

    loop For each line in file
        ML->>ML: Parse line

        alt Line is [continents] header
            ML->>ML: Set section = CONTINENTS
        else Line is [territories] header
            ML->>ML: Set section = TERRITORIES
        else Line is continent data
            ML->>C: Create Continent(name, id, bonus)
            ML->>M: addContinent(continent)
            M->>M: Store continent in vector
            M->>M: Update continent maps
        else Line is territory data
            ML->>T: Create Territory(name, id, continentId, x, y)
            ML->>M: addTerritory(territory)
            M->>M: Store territory in vector
            M->>M: Update territory maps
            ML->>T: Parse adjacent territories
            loop For each adjacent territory
                ML->>T: addAdjacentTerritory(adjId)
            end
        end
    end

    ML->>M: validate()
    M->>M: isConnectedGraph()
    M->>M: validateContinents()
    M->>M: validateTerritoryMembership()
    M-->>ML: validation result

    ML-->>ML: Return created map
